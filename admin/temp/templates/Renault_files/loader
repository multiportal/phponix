var _rely,_w=window,_d=document;if(void 0===_rely||void 0===_rely.def){void 0===_rely&&(_rely=[]),_rely.def=!0,_rely.timeout=2e3,_rely.postMessage=!0,_rely.ptc="https:"==_w.location.protocol?"https":"http",_rely.options=_rely.options?_rely.options:{},_rely.options.spa_autoreload=void 0===_rely.options.spa_autoreload||_rely.options.spa_autoreload,_rely.h="api.retargetly.com",_rely.x=encodeURIComponent,_rely.iframeCount=0,_rely.referer="",_rely.stack=[],_rely.stack.next=function(){if(this.gprc())return null;for(var e=0;e<this.length;e++)if(!this[e].sent)return this[e].sent=!0,this[e];return null},_rely.stack.gprc=function(){for(var e=0;e<this.length;e++)if(this[e].processing)return this[e];return null},_rely.callback=function(){var e=this.stack.gprc();e&&!e.processed&&(e.processing=!1,e.processed=!0,this.stack_call())},_rely.pts=function(e){if("pageview"!=e.type&&"formtags"!=e.type)for(var t=0;t<this.stack.length;t++)if(JSON.stringify(this.stack[t])==JSON.stringify(e))return!1;return this.stack.push(e),!0};try{var eventMethod=_w.addEventListener?"addEventListener":"attachEvent",eventer=_w[eventMethod],messageEvent="attachEvent"==eventMethod?"onmessage":"message";eventer(messageEvent,function(e){var t;e.origin==_rely.ptc.protocol+"//"+_rely.h&&(void 0===e.data||0<(t=(e.data+"").split("|")).length&&("ok"==t[0]?_rely.callback():"sg"==t[0]&&(_d.cookie="_rl_sg="+t[1]+"; path=/; expires="+new Date((new Date).getTime()+7776e6).toUTCString()+";")))},!1)}catch(e){_rely.postMessage=!1}_rely.get_client=function(e){for(var t in e)if("pid"==t)return e[t];return this.pid?this.pid:null},_rely.send=function(){var e,t,r,i=_rely,s={},l={},_=["tags","sec","gender","age","born","map","ml_sh5","ml_sh2","mb_sh5","mb_sh2","nid_sh5","nid_sh2","ml_raw","mb_raw","nid_raw","external_id"];if(void 0!==i&&void 0!==i.length&&0<(e=i.length))for(var o=0;o<e;o++){t=i[o];var n=this.get_client(t);if(n&&"object"==typeof t)for(r in t)-1!=_.indexOf(r)&&("map"==r?l[n]={id:this.x(t[r])}:(void 0===s[n]&&(s[n]={params:[]}),s[n].params.push(r+"="+this.x(t[r]))))}if(0<Object.keys(s).length)for(r in s)this.pts({pid:r,type:"data",value:s[r].params.join("&")});else!this.postMessage&&this.sic&&this.pid&&this.pts({type:"sic",pid:this.pid});if(0<Object.keys(s).length)for(r in l)this.pts({type:"map",pid:r,value:l[r].id});this.stack_call(),this.length=0},_rely.stack_call=function(){var e,t,r,i,s=this.stack.next();null!==s&&(e="script",r=t="",void 0!==_rely.options&&void 0!==_rely.options.limit_drop&&(r=_rely.options.limit_drop),"pageview"==s.type?(e="iframe",t=this.ptc+"://"+this.h+"/api?id="+s.pid+"&src="+s.s+"&url="+this.x(s.pv_obj.url)+"&ref="+this.x(s.pv_obj.referrer)+"&utmz="+this.x(s.pv_obj.utmz)+"&n="+this.x(s.pv_obj.title)+"&md="+this.x(s.pv_obj.description)+"&mk="+this.x(s.pv_obj.keywords)+"&il="+s.pv_obj.ilvl+"&limit_drop="+r):"data"==s.type?t=this.ptc+"://"+this.h+"/data?id="+s.pid+"&"+s.value:"formtags"==s.type?t=this.ptc+"://"+this.h+"/formtags?id="+s.pid:"sic"==s.type?t=this.ptc+"://"+this.h+"/cks?id="+s.pid:"map"==s.type&&(e="image",t=this.ptc+"://"+this.h+"/map?pid="+s.pid+"&mid="+s.value+"&rt=img&limit_drop="+r),""!=t&&(i=null,"iframe"==e?(this.iframeCount++,(i=_d.createElement("iframe")).setAttribute("id","rely-iframe-"+this.iframeCount),i.src=t,i.style.display="none"):"script"==e?(i=_d.createElement("script")).src=t:"image"==e&&((i=_d.createElement("img")).src=t),null!==i?(s.processing=!0,i.onload=function(){this.callback()}.bind(this),setTimeout(function(){this.callback()}.bind(this),_rely.timeout),_d.body.appendChild(i)):this.callback()))},_rely.pvo=function(){var e,t={},r=_w.parent!==_w.self?_w.parent===_w.top?1:2:0,i={ilvl:r,url:0==r?_d.location.href:1==r?_d.referrer:"",referrer:0==r?_d.referrer:"",title:0==r?_d.title:"",description:"",keywords:""};try{t=_w.top.document,i.url=_d.top.location.href,i.referrer=t.referrer,i.title=t.title||""}catch(e){}this.referer&&(i.referrer=this.referer);for(var s=t.getElementsByTagName?t.getElementsByTagName("meta"):[],l=0;l<s.length;l++)"keywords"==s[l].name&&s[l].content?i.keywords=s[l].content.replace(/^\s+|\s+$/g,"").substr(0,100):"description"==s[l].name&&s[l].content&&(i.description=s[l].content.replace(/^\s+|\s+$/g,"").substr(0,300));return _d.cookie&&(e=_d.cookie.match(/.*__utmz=([^;]*)/))?i.utmz=e[1]:i.utmz="",i},_rely.oldURL=_d.location.href,_rely.udts=200,_rely.udact=!1,_rely.rpv=function(){this.spv(this.pvo())},_rely.udtc=function(){_rely.udact=!0;var e=_d.location.href;_rely.oldURL!=e&&(_rely.rpid(),_rely.referer=_rely.oldURL,_rely.oldURL=e,_rely.rpv()),setTimeout(_rely.udtc,_rely.udts)},_rely.rpid=function(){for(var e=0;e<_rl_ids.length;e++)_rl_ids[e].processed=!1},_rely.spv=function(e){var t,r=0;if("undefined"!=typeof _rl_ids){_rely.rmrid();for(var i=0;i<_rl_ids.length;i++)_rl_ids[i].processed||(r=_rl_ids[i].pid,t=0,"number"==typeof _rl_ids[i].src&&(t=_rl_ids[i].src),r&&(_rely.pid=r,this.pts({type:"pageview",pid:r,s:t,pv_obj:e}),_rl_ids[i].processed=!0))}0!=this.stack.length&&(0<this.length&&this.send(),this.stack_call())},_rely.svid=function(){var e,t,r,i;"undefined"==typeof _rl_ids&&(_rl_ids=[]),"number"==typeof _rl_id&&99<_rl_id?(e=_rl_id,t=0,"number"==typeof _rl_src&&(t=_rl_src),_rl_ids.push({pid:e,src:t})):0!=_rl_ids.length||(i=(r=_d.getElementsByTagName("script"))[r.length-1].getAttribute("src",2))&&(e=i.match(/.*\?id=(\d\d\d+)/))&&_rl_ids.push({pid:e[1],src:0}),_rely.rmrid()},_rely.rmrid=function(){for(var e=_rl_ids.length-1;0<=e;e--)this.erid(_rl_ids[e].pid,_rl_ids[e].src,e)&&_rl_ids.splice(e)},_rely.erid=function(e,t,r){for(var i=0;i<_rl_ids.length;i++)if(i!=r&&_rl_ids[i].pid==e&&_rl_ids[i].src==t)return!0;return!1},_rely.reloadFormTags=function(){"object"==typeof _rl_ids&&"object"==typeof _rl_ids[0]&&_rl_ids[0].pid&&(this.pts({type:"formtags",pid:_rl_ids[0].pid}),this.stack_call())}}_rely.svid(),void 0!==_rely.options&&_rely.options.spa_autoreload&&!_rely.udact&&_rely.udtc(),_rely.rpv();